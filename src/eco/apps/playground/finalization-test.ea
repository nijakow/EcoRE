
{
    static with inherited _ = std Module;
    with app = $;

    n => #'ecosphere.ecore.next_finalizable_or'(42);

    own Object = {
        static with inherited _ = std Clonable;

        finalize => (
            (std io out << 'Finalizing ' << self) newline commit.
        );

        writeOn: w => w << 'a test dummy';
    };

    Main => (
        (framework actions open) ui BuildAndOpen: [ :ui |
            ui UndecoratedWindow(
                ui VBox(
                    ui Button(
                        ui Padding(5, ui Label: 'Create one!'),
                        $[ :(app, obj) |
                            std reflect EnableFinalization: (obj clone)
                        ] bind(app, Object)
                    ) ~ xLayout: (ui layouts Flexible)
                )
            )
        ]
    );
}
