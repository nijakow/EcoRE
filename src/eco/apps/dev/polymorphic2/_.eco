
std Module
{
    with app = $;

    core :: (here / 'core' / '_.eco') importIn: self;


    PaperWrapperMorph :: Clonable {
        with inherited own Morph = $package gfx morphic morphs Morph;

        paper <- No;

        {
            paper: p => (
                paper <- Yes: p.
                renderDirty.
              ^ self
            );

            renderImplOn: renderer => (
                paper yes: [ :p | p renderOn: renderer ].
              ^ self
            );

            writeOn: w => w << 'a paper wrapper morph';
        }
    };


    Test => (
        |
            paper  <- ((core paper) Paper) Extent: (math geometry Point X: 400 Y: 400),
            stream <- paper stream,
            r      <- 5,
            circle <- (core objects FilledCircle Radius: r)
        |

        1 to: 2500 do: [ :i |
            stream emit: circle.
            ((i mod: 50) == 0) if: [
                stream newline.
            ].
        ].

        (framework actions open) ui BuildAndOpen: [ :ui |
            ui Window(400, 400,
                ui VBox(
                    ui Label: 'Hello World!',
                    PaperWrapperMorph new paper: paper
                )
            )
        ]
    );
}
