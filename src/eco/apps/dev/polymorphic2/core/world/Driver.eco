
{
    isa std Classlike;

    Instance :: std Clonable
    {
        |
            world,
            rootPaper,
            rootMorph,
        |

        {
            protected polymorphic <- $package;

            initWithWorld: w => (
                world     <- w.
                rootPaper <- ((polymorphic core paper) Paper) Extent: ((polymorphic math geometry) Point X: 400 Y: 400).
                rootMorph <- ((polymorphic morphs) repo TestMorph4) link.

                rootPaper node: (world node).
                (world node) paper: rootPaper.

              ^ self
            );

            initWithoutWorld => initWithWorld: (((polymorphic core world) World) New);

            mouseMovedToX: x Y: y => (
                (std io out << 'Mouse moved to ' << x << ' ' << y) newline commit.
              ^ self
            );

            mouseClicked: click => (
                (std io out << 'Mouse clicked!') newline commit.
              ^ self
            );

            mouseScrolledByX: dx Y: dy => (
              ^ self
            );

            keyPressed: key => (
                (std io out << 'Key pressed!') newline commit.
              ^ self
            );

            keyReleased: key => (
              ^ self
            );

            tick => (
                "Do nothing..."
              ^ self
            );

            run => (
                (rootPaper stream) emit: rootMorph.
              ^ self
            );

            writeOn: w => w << 'a polymorphic driver';
        }
    };

    World: world => (Instance clone) initWithWorld: world;
    New          => (Instance clone) initWithoutWorld;
}
