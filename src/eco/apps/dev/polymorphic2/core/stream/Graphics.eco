
{
    isa std Classlike;

    Instance :: Clonable
    {
        |
            emitter,
            bounds
        |

        {
            protected polymorphic <- $package;

            emitter: e bounds: b => (
                emitter <- e.
                bounds <- b.
              ^ self
            );

            at: offset put: object => (
                |
                    objectBounds <-
                        (polymorphic math geometry Rectangle)
                            X: offset x + bounds x
                            Y: offset y + bounds y
                            W: object bounds w
                            H: object bounds h.
                |

                emitter emit: object in: objectBounds.

              ^ self
            );

            writeOn: w => w << 'a graphics stream';
        }
    };

    Emitter: emitter Bounds: bounds => (Instance clone) emitter: emitter bounds: bounds;
}
