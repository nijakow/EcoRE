"A simple test file for EcoRE"

| x |

x <- {
    x, y,
    z = {}
},

| y |

y <- {
    a, b, c,
    foo => bar;
    bar(x, y, z) => baz(x, y, self);
    baz(x, y, z) => x;
},

y bar({}, {}, {});

| z |
z <- {
    test_varargs(...) => (
        #'ecosphere.ecore.io.print'(...);
    ),
    test_varargs2(...) => test_varargs(...);
    counting_loop(closure, x) => (
        #'ecosphere.ecore.flow.value'(closure, x),
        x <- #'ecosphere.ecore.math.add_integers'(x, 1),
        #'ecosphere.ecore.flow.reset'()
    )
},

^ (
    "| the_closure |
    the_closure <- [ x => z test_varargs2(x) ],
    z counting_loop(the_closure, 0)"

    | the_object <- #=alabel: {}, obj <- #~alabel~ |
    #'ecosphere.ecore.slots.add_value_slot'(obj, 0, #'hello', 42),
    #'ecosphere.ecore.io.print'(obj hello)
  )
